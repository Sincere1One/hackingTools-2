net=require('./netInfrastructure');

exports.BAIDU_PORT1=40310;
exports.BAIDU_PORT1=6259;

function GetGeolocation(hostname, port, args, callback, onError)
{
    net.MakeGet(hostname, port, "/geolocation?mcmdf=inapp_", callback, onError);
}

exports.Func={
    "geo": GetGeolocation
};

exports.Go=
function(methodName, hostname, port, args, callback)
{
    if (typeof(hostname)=="string")
    {
        hostname=[hostname];
    }

    var totalCount=0;
    var result={};
    function onFinishGenor(id)
    {
        return function(data)
        {
            totalCount++;
            result[id]=[1, data];
            if (totalCount==hostname.length)
                callback(result);
        };
    }
    function onErrorGenor(id)
    {
        return function(err)
        {
            totalCount++;
            result[id]=[1, err];
            if (totalCount==hostname.length)
                callback(result);
        };
    }

    for (var i=0; i<hostname.length; i++)
    {
        this.Func[methodName](hostname[i], port, args, onFinishGenor(hostname[i]), onErrorGenor(hostname[i]));
    }
}
